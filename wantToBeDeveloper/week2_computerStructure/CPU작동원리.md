### 연산 장치와 제어 장치, 레지스터

1. 연산 장치(=산술논리연산장치)
   - 산술 연산과 논리 연산을 수행한다.
   - 연산에 필요한 데이터를 레지스터에서 가져오고 연산 결과를 다시 레지스터로 보낸다.
2. 제어 장치
   - 명령어를 순서대로 실행할 수 있도록 제어하는 장치
   - 주기억장치에서 프로그램 명령어를 꺼내 해독, 그 결과를 따라 명령어 실행에 필요한 제어 신호를 기억장치와 연산장치, 입출력장치로 보낸다.
   - 위의 장치들이 보낸 신호를 받아 다음에 수행할 동작을 결정한다
3. 레지스터
   - 고속 기억장치, 명령어의 주소나 코드, 연산에 필요한 데이터, 연산 결과 등을 임시로 저장한다
   - 중앙처리장치 종류에 따라 사용할 수 있는 레지스터의 개수와 크기가 다르다
   - 용도에 따라 범용 레지스터와 특수목적 레지스터로 구분
     a. 범용 레지스터: 연산에 필요한 데이터나 연산 결과를 임시로 저장
     b. 특수목적 레지스터: 특별한 용도로 사용하는 레지스터

<br /><br />

### 특수 목적 레지스터 중 중요한 것

- 메모리 주소 레지스터: MAR, 읽기와 쓰기 연산을 수행할 주기억장치 주소 저장
- 프로그램 카운터: PC, 다음에 수행할 명령어 주소 저장
- 명령어 레지스터: IR, 현재 실행 중인 명령어 저장
- 메모리 버퍼 레지스터: MBR, 주기억장치에서 읽어온 데이터나 저장할 데이터를 임시 저장
- 누산기: AC, 연산 결과 임시 저장
  <br /><br />

### CPU의 동작 과정

1. 주기억장치는 입력장치로 입력받은 데이터 또는 보조기억장치에 저장된 프로그램을 읽어온다
2. CPU는 프로그램을 실행하기 위해 주기억장치에 저장된 프로그램 명령어와 데이터를 읽어와 처리하고 결과를 다시 주기억장치에 저장한다.
3. 주기억장치는 처리 결과를 보조 기억장치에 저장하거나 출력 장치로 보낸다.
4. 제어장치는 위의 과정에서 명령어가 순서대로 실행되도록 각 장치를 제어한다.
   <br /><br />

### 명령어 세트

- CPU가 실행할 명령어들의 집합
  > 연산코드 + 피연산자로 이루어짐
  > 연산코드: Operation Code, 실행할 연산 | 연산, 제어, 데이터 전달, 입출력 기능을 가진다.
  > 피연산자: Operand, 필요한 데이터나 저장 위치 | 주소, 숫자/문자, 논리 데이터 등을 저장한다.
- CPU는 프로그램을 실행하기 위해 주기억장치에서 명령어를 순차적으로 인출하여 해독하고 실행하는 과정을 반복한다.
  <br /><br />

### 명령어 사이클

- CPU가 주기억장치에서 한 번에 하나의 명령어를 인출하여 실행하는데 필요한 일련의 활동
- 주기억장치의 지정된 주소에서 하나의 명령어를 가져오고 실행 사이클에서는 명령어를 실행한다.
- 하나의 명령어 실행이 완료되면 그 다음 명령어에 대한 인출 사이클이 시작된다.

1. **인출 사이클**
   - CPU가 각 명령어 사이클의 시작 단계에서 대기
   - PC가 가리키는 기억장치의 위치에서 명령어 인출
   - PC의 내용을 1씩 증가
     → 기억장치에 저장된 순서대로 명령어를 읽는다.
     > T0: MAR ← PC
     > T1: MBR ← M[MAR], PC ← PC + 1
     > T2: IR ← MBR
     > (T0~T2: CPU 클럭의 주기)
2. **실행 사이클**
   - 데이터 이동: CPU와 기억장치 or CPU와 I/O 장치 간 데이터 이동
     → IR에 저장된 오퍼랜드(addr)를 MAR을 통해 기억장치로 보내 데이터 인출
     > T0: MAR ← IR(addr): IR에 있는 주소를 MAR로 보낸다
     > T1: MBR ← M[MAR]: 주소에 지정한 기억장소에서 데이터를 인출, MBR로 전송
     > T2:AC ← MBR: AC에 적재, LOAD 실행 완료
   - 데이터 처리: 데이터에 대하여 산술 혹은 논리 연산 수행
     → AC 레지스터의 내용을 기억장치에 저장
     > T0: MAR ← IR(addr): IR에 있는 주소를 MAR로 보낸다
     > T1: MBR ← AC: 저장할 데이터를 버퍼 레지스터로 이동
     > T2: M[MAR] ← MBR: MBR의 내용을 MAR이 저장하는 기억장소에 저장
   - 데이터 저장: 연산결과 혹은 입력장치로부터 읽은 데이터를 기억장치에 저장
     → 데이터 처리 명령어, 기억장치에 저장된 데이터를 AC의 내용과 더해 다시 AC에 저장
     > T0: MAR ← IR(addr): IR에 있는 주소를 MAR로 보낸다
     > T1: MBR ← M[MAR]: 주소가 지정한 기억장소에서 데이터를 인출하고 MBR로 전송
     > T2: AC ← AC + MBR: AC의 내용을 더하고 결과값을 AC에 저장
   - 제어: 프로그램의 실행 순서 결정
     → 제어 명령은 대부분 분기 명령어로 실행
     > T0: PC ← IR(addr): 오퍼랜드가 PC로 적재

<br />

3. **인터럽트 사이클**
   - 프로그램 실행 중 CPU의 현재 처리 순서를 중단 시키고 다른 동작을 수행하도록 하는 사이클
   - ISR: Interrupt Service Routine, 인터럽트를 처리하기 위해 수행되는 프로그램 루틴
     → 인터럽트가 들어왔을 때 CPU는 어떤 장치가 인터럽트를 요구했는지 확인하고 해당 ISR 호출, 해당 사이클 종료 시 원래 프로그램으로 돌아가 수행
     > T0: MBR ← PC
     > T1: MAR ← SP, PC ← ISR의 시작주소
     > T2: M[MAR] ← MBR
